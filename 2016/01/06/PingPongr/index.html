<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="author" content="Kellen Piffner" />
    <meta name="title" content="Introducing PingPongr" />
    <meta name="description" content="Developer blogging about web technology, healthcare, and whatever else comes to mind." />
    <title>Introducing PingPongr - kellen.piffner.com</title>
    
    <link rel="alternative" href="/atom.xml" title="kellen.piffner.com" type="application/atom+xml">
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="/css/blog.css" type="text/css">
    <!--[if lt IE 9]>
        <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
    
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-47279370-1', 'piffner.com');
    ga('send', 'pageview');

</script>

    
</head>

<body>
    <div class="main">
        <div class="container">
            <article class="post">
    <header class="page-header">
        <div class="row page-header-title">
            <h1 class="col c9">
                Introducing PingPongr
            </h1>
            <div class="col c3 col-right">
                <a class="ico backlink articles-nav" href="/" title="Go to /"><span class="backlink-details">Home</span> ^</a>
            </div>
        </div>
        <div class="page-subheader">
            <time pubdate datetimes="2016-01-06T18:00:00.000Z">
                <h4>
                    06 Jan 2016
                </h4>
            </time>
            <div class="tags">
                
  
    <a href='/tags/web/' class="article-tag">web</a>
  
    <a href='/tags/PingPongr/' class="article-tag">PingPongr</a>
  
    <a href='/tags/Owin/' class="article-tag">Owin</a>
  
    <a href='/tags/DotNet/' class="article-tag">DotNet</a>
  

            </div>
        </div>
    </header>

    <div class="article-entry">
        <p>Over the break, I wanted to build a quick nutrition web app.</p>
<p>My normal go-to framework for web applications is <a href="https://github.com/NancyFx/Nancy" target="_blank" rel="external">Nancy</a>.  It’s pretty lean and easy to get going, but… lately it’s been feeling rather heavy.  It has a lot of features I never use (razor views, for instance), and I end up building out a good bit of bootstrap code to turn it all off and manually configure the bits I want.</p>
<p>So… what to do…<br><a id="more"></a> </p>
<h2 id="MediatR"><a href="#MediatR" class="headerlink" title="MediatR"></a>MediatR</h2><p>Recently, I discovered <a href="https://github.com/jbogard/MediatR" target="_blank" rel="external">MediatR</a>.  At its simplest, it sends a request through a handler that returns a response.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Ping</span> : <span class="title">IRequest</span>&lt;<span class="title">string</span>&gt; &#123; &#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PingHandler</span> : <span class="title">IRequestHandler</span>&lt;<span class="title">Ping</span>, <span class="title">string</span>&gt; &#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">string</span> <span class="title">Handle</span>(<span class="params">Ping request</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"Pong"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>You use the above handler like so:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> pong = mediator.Send(<span class="keyword">new</span> Ping());  <span class="comment">//returns "Pong"</span></div></pre></td></tr></table></figure>
<p>What’s interesting about MediatR is all the configuration magic happens at your IoC container.  Handlers are generated by the container, injecting any dependencies.  The request and response objects never have to know anything about the handler in-between.</p>
<p>And infrastructure and other concerns can be moved to decorators that your original code never has to know about:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">LoggingDecorator</span>&lt;<span class="title">TRequest</span>, <span class="title">TResponse</span>&gt;</div><div class="line">    : <span class="title">IRequestHandler</span>&lt;<span class="title">TRequest</span>, <span class="title">TResponse</span>&gt;</div><div class="line">    <span class="title">where</span> <span class="title">TRequest</span> : <span class="title">IRequest</span>&lt;<span class="title">TResponse</span>&gt;</div><div class="line">&#123;</div><div class="line">    IRequestHandler&lt;TRequest, TResponse&gt; inner;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LoggingDecorator</span>(<span class="params">IRouteRequestHandler&lt;TRequest, TResponse&gt; inner</span>)</span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">this</span>.inner = inner;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> TResponse <span class="title">Handle</span>(<span class="params">TRequest message</span>)</span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">var</span> sw = Stopwatch.StartNew();</div><div class="line">        <span class="keyword">var</span> results = <span class="keyword">this</span>.inner.Handle(message, cancellationToken);</div><div class="line">        sw.Stop();</div><div class="line"></div><div class="line">        Console.WriteLine(String.Format(<span class="string">"Processed &#123;0&#125; in &#123;1&#125;ms"</span>, message.ToString(), sw.ElapsedMilliseconds));</div><div class="line"></div><div class="line">        <span class="keyword">return</span> results;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Handlers like the above LoggingDecorator can ‘decorate’ handlers, wrapping them  for all sorts of things - validations, logging, authorizations, etc.</p>
<p>I won’t go much more into this, but check out Jimmy Bogard’s blog post  <a href="https://lostechies.com/jimmybogard/2014/09/09/tackling-cross-cutting-concerns-with-a-mediator-pipeline/" target="_blank" rel="external">“Tackling cross-cutting concerns with a mediator pipeline”</a> for more information on using this pattern.</p>
<h2 id="Owin"><a href="#Owin" class="headerlink" title="Owin"></a>Owin</h2><p>After using MediatR for a bit, I realized that it covered the majority of what I wanted a web framework to do.  It sent requests, handled them, and returned responses.  It was just missing the ‘web’ part.  How hard could it be, right?  Surprisingly, it turns out to be not really all that hard.</p>
<p>You’ve probably heard of “Owin”, but might not know anything about it other than it’s ‘the next thing!’ or slightly more useful, it’s an <a href="http://owin.org/" target="_blank" rel="external">“Open Web Interface for .NET”</a>.</p>
<p>If you’ve worked with nodejs for a web app, you’re probably familiar with their middleware layers.  It allows you to process an HTTP request through a pipeline,  where each ‘layer’ can do whatever it needs to with the request - respond, log, etc. - all in a standardized way.  Owin brings that to .NET.  And combined with  async/await, it’s quite easy to create your own middleware.</p>
<p>The quickest way to get going with Owin is to use the Microsoft’s Owin nuget packages.  They provide a light layer on top of the base Owin requests api and server packages.  Here’s an empty, self hosted web server:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> Owin;</div><div class="line"><span class="keyword">using</span> System;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Startup</span></div><div class="line">    &#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Configuration</span>(<span class="params">IAppBuilder app</span>)</span></div><div class="line">        &#123;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">var</span> url = <span class="string">"http://localhost:12345"</span>;</div><div class="line"></div><div class="line">        <span class="keyword">using</span> (Microsoft.Owin.Hosting.WebApp.Start&lt;Startup&gt;(url))</div><div class="line">        &#123;</div><div class="line">            Console.WriteLine(<span class="string">"Listening at "</span> + url);</div><div class="line">            Console.ReadLine();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>If you run this example, you’ll see it doesn’t really do anything.  Any request you run against the server will just come back 404 not found.</p>
<p>So, let’s add something to the Configuration function:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">app.Use(<span class="keyword">async</span> (context, next) =&gt;</div><div class="line">&#123;</div><div class="line">   Console.WriteLine(<span class="string">"Something is happening!"</span>);</div><div class="line">   <span class="keyword">await</span> next();</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>Now if you run the example and request something against the server, you’ll still get 404, but you’ll also get that console message.  You’ve successfully created your first Owin middleware!</p>
<p>So… what’s going on?</p>
<p>The app.Use call is defining an async function that runs when a request comes in.  Each request will go through that function.  You can have multiple ‘Use’ functions that are called in order when a request comes in, with each one calling the “next()” function in the pipeline.  The context passed contains the information about the request - the headers, the content and response streams - all the normal things you’d expect from a web request.</p>
<p>Let’s add another, more complicated middleware that actually does something:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">app.Use(<span class="keyword">async</span> (context, next) =&gt;</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (context.Request.Path.StartsWithSegments(<span class="keyword">new</span> PathString(<span class="string">"/hello"</span>)))</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">using</span> (<span class="keyword">var</span> writer = <span class="keyword">new</span> System.IO.StreamWriter(context.Response.Body))</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">await</span> writer.WriteLineAsync(<span class="string">"Hello!"</span>);</div><div class="line">        &#125;</div><div class="line">        context.Response.StatusCode = <span class="number">200</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">await</span> next();</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>If you load up “/hello” in a browser, you should now see “Hello!”, while you’ll still see your earlier console message.</p>
<h2 id="PingPongr"><a href="#PingPongr" class="headerlink" title="PingPongr"></a>PingPongr</h2><p>That brings me to <a href="https://github.com/decoy/PingPongr" target="_blank" rel="external">PingPongr</a>, the product of all this discovery.</p>
<p>The PingPongr nuget package has only one dependency: the core Owin package.</p>
<p>Here’s an example API that should look pretty familiar after seeing the earlier mediator code:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> PingPongr;</div><div class="line"><span class="keyword">using</span> System.Threading;</div><div class="line"><span class="keyword">using</span> System.Threading.Tasks;</div><div class="line"></div><div class="line"><span class="comment">//A request is unique per route</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Ping</span> : <span class="title">IRouteRequest</span>&lt;<span class="title">Pong</span>&gt;</div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">string</span> Hi &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//responses can be shared between routes</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Pong</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">string</span> Reply &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PingHandler</span> : <span class="title">IRouteRequestHandler</span>&lt;<span class="title">Ping</span>, <span class="title">Pong</span>&gt;</div><div class="line">&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task&lt;Pong&gt; <span class="title">Handle</span>(<span class="params">Ping message, CancellationToken cancellationToken</span>)</span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">await</span> DoSomethingCoolAsync();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>And finally, a functional, self hosted example using SimpleInjector for the container.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> Owin;</div><div class="line"><span class="keyword">using</span> PingPongr;</div><div class="line"><span class="keyword">using</span> PingPongr.OwinSupport;</div><div class="line"><span class="keyword">using</span> SimpleInjector;</div><div class="line"><span class="keyword">using</span> System;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Startup</span></div><div class="line">    &#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Configuration</span>(<span class="params">IAppBuilder app</span>)</span></div><div class="line">        &#123;</div><div class="line">            <span class="comment">//setup the container</span></div><div class="line">            <span class="keyword">var</span> container = <span class="keyword">new</span> Container();</div><div class="line">            <span class="keyword">var</span> assemblies = <span class="keyword">new</span>[] &#123; <span class="keyword">typeof</span>(Program).Assembly &#125;;</div><div class="line"></div><div class="line">            <span class="comment">//register all the route request handlers</span></div><div class="line">            container.Register(<span class="keyword">typeof</span>(IRouteRequestHandler&lt;,&gt;), assemblies);</div><div class="line"></div><div class="line">            container.Verify();</div><div class="line"></div><div class="line">            <span class="comment">//an instance factory is how request handlers are built from the container.</span></div><div class="line">            <span class="keyword">var</span> factory = <span class="keyword">new</span> InstanceFactory(container.GetInstance);</div><div class="line"></div><div class="line">            <span class="comment">//the lib comes with a json media handler built with SimpleJson</span></div><div class="line">            <span class="keyword">var</span> mediaHandlers = <span class="keyword">new</span>[] &#123; <span class="keyword">new</span> DefaultJsonMediaHandler() &#125;;</div><div class="line"></div><div class="line">            <span class="comment">//the routes are found using reflection via the RouteBuilder</span></div><div class="line">            <span class="keyword">var</span> routes = RouteBuilder.WithAssemblies(assemblies).GetRoutes();</div><div class="line">            <span class="keyword">foreach</span> (<span class="keyword">var</span> r <span class="keyword">in</span> routes) Console.WriteLine(r.Path);</div><div class="line"></div><div class="line">            <span class="comment">//setup the PingPongr router</span></div><div class="line">            <span class="comment">//(Note: we're setting this up manually, but it could be created by the container)</span></div><div class="line">            IRouter router = <span class="keyword">new</span> Router(</div><div class="line">                routes,</div><div class="line">                mediaHandlers,</div><div class="line">                factory</div><div class="line">                );</div><div class="line"></div><div class="line">            app.UsePingPongr(router);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">using</span> (Microsoft.Owin.Hosting.WebApp.Start&lt;Startup&gt;(<span class="string">"http://localhost:12345"</span>))</div><div class="line">        &#123;</div><div class="line">            Console.ReadLine();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>A few things to note:</p>
<ul>
<li>The InstanceFactory works exactly like MediatR’s SingleInstanceFactory, so the container examples from the MediatR project can be used directly.</li>
<li>The RouteBuilder object does a bit of reflection to discover possible routes (IRouteRequests) and cache them for use in the router.</li>
<li>Any HTTP method is accepted on a matching route.  Route matching is strictly by the path.</li>
<li>All handlers are async.  Welcome to the future ;).</li>
</ul>
<p>Over all, the library ended up quite lean and an easy read if you’re curious about the inner workings.  The Tests and Sandbox example projects should also help.</p>
<h2 id="Future"><a href="#Future" class="headerlink" title="Future"></a>Future</h2><p>The package is still currently marked as pre-release until it’s seen some real world use.  At the very least, the default JSON implementation needs some tweaks to check a broader range of request media types.</p>
<p>At some point I’d also like to build a standard TCP/IP server for the library as an alternative to Owin making the library even more useful for inter-process communication for micro-services.</p>
<p>My hope is to keep the core library very lean, though.  The less it’s doing, with the least amount of magic, the more maintainable it is for me (and you) to use in projects in the long run.</p>
<p>Oh, also in the future, I hope to complete that nutrition app I talked about…</p>

    </div>

    <footer>
        
<section id="comment">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'piffnercom'; // required: replace example with your forum shortname
        var disqus_identifier = '2016/01/06/PingPongr/';
        var disqus_title = 'Introducing PingPongr';
        var disqus_url = 'http://kellen.piffner.com/2016/01/06/PingPongr/';


        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


    </footer>
</article>

<!--<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>-->
<!--<script>hljs.initHighlightingOnLoad();</script>-->
        </div>
    </div>
    <footer class="page-footer">
    <div class="container">
        <div class="row">
            <div class="col c7">
                <a href="/">
                    kellen.piffner.com
                </a>
            </div>
            <div class="col c5 col-right">
                <a class="social-symbol" title="twitter" target="_blank" href="https://twitter.com/@KellenPiffner">&#xe086;</a>
<a class="social-symbol" title="github" target="_blank" href="https://github.com/decoy">&#xe037;</a>
<a class="social-symbol" title="google+" target="_blank" href="https://plus.google.com/109745187704465695599/about">&#xe039;</a>
<a class="social-symbol" title="linkedin" target="_blank" href="http://www.linkedin.com/in/kellenpiffner">&#xe052;</a>
<a class="social-symbol" title="rss" target="_blank" href="/atom.xml">&#xe071;</a>
            </div>
        </div>
    </div>
</footer>
    <script> 
var $buoop = {vs:{i:10,f:-4,o:-4,s:8,c:-4},api:4}; 
function $buo_f(){ 
 var e = document.createElement("script"); 
 e.src = "//browser-update.org/update.min.js"; 
 document.body.appendChild(e);
};
try {document.addEventListener("DOMContentLoaded", $buo_f,false)}
catch(e){window.attachEvent("onload", $buo_f)}
</script>
</body>
</html>